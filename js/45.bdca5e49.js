"use strict";(self["webpackChunksos_airrescue"]=self["webpackChunksos_airrescue"]||[]).push([[45],{45:function(e,a,t){t.r(a),t.d(a,{default:function(){return R}});var l=t(3396),i=t(4870),n=t(40),s=t(7228),o=t(7139),u=t(1368);const d=e=>((0,l.dD)("data-v-82fdebb4"),e=e(),(0,l.Cn)(),e),r={class:"mbox"},m=d((()=>(0,l._)("div",{class:"mlabel"},"两地距离 (km)：",-1))),p={key:0,class:"mbox"},v=d((()=>(0,l._)("div",{class:"mlabel"},"需要燃料 (kg)：",-1))),c={key:1,class:"mbox"},_=d((()=>(0,l._)("div",{class:"mlabel"},"所需时间：",-1))),b=d((()=>(0,l._)("br",null,null,-1)));var f=(0,l.aZ)({__name:"DataCard",props:{title:{type:String,default:"计算结果"},more_detail:{type:Boolean,default:!1},distance:{type:Number},need_fuel:{type:Number,default:0},percentage:{type:Number},need_time:{type:Number,default:0}},setup(e){const a=e,t=(0,l.Fl)((()=>a.percentage?(100*a.percentage).toFixed(2):0));return(e,n)=>((0,l.wg)(),(0,l.j4)((0,i.SU)(u.ZP),{title:a.title},{default:(0,l.w5)((()=>[(0,l._)("div",r,[m,(0,l.Uk)((0,o.zw)(a.distance?.toFixed(3)),1)]),a.more_detail?((0,l.wg)(),(0,l.iD)("div",p,[v,(0,l.Uk)((0,o.zw)(a.need_fuel?.toFixed(3))+" ("+(0,o.zw)(t.value)+" %) ",1)])):(0,l.kq)("",!0),a.more_detail?((0,l.wg)(),(0,l.iD)("div",c,[_,(0,l.Uk)(" "+(0,o.zw)(a.need_time.toFixed(4))+" h",1),b,(0,l.Uk)(" "+(0,o.zw)((60*a.need_time).toFixed(4))+" min ",1)])):(0,l.kq)("",!0)])),_:1},8,["title"]))}}),h=t(89);const y=(0,h.Z)(f,[["__scopeId","data-v-82fdebb4"]]);var g=y,k=t(2370),w=t(2649),M=t(5202),x=t(1258),U=t(7627),Z=t(5501);const S=e=>((0,l.dD)("data-v-4979e723"),e=e(),(0,l.Cn)(),e),H={class:"mbox"},W=S((()=>(0,l._)("span",{class:"mlabel"},"出发地点：",-1))),P={class:"mbox"},D=S((()=>(0,l._)("span",{class:"mlabel"},"目的地点：",-1))),C={class:"mbox more"},F=S((()=>(0,l._)("span",{class:"mlabel"},"更详细的计算：",-1))),N={key:0,class:"mbox"},z=S((()=>(0,l._)("span",{class:"mlabel"},"飞机型号：",-1))),I={class:"mbox",style:{"text-align":"right"}};var j=(0,l.aZ)({__name:"InputCard",props:{title:{type:String,default:"数据输入"}},emits:["start"],setup(e,{emit:a}){const t=e,n=(0,U.oR)(),s=(0,i.iH)(!1),o=(0,i.iH)(void 0),d=(0,i.iH)(void 0),r=(0,i.iH)(void 0),m=(0,i.iH)([{label:"机场",options:n.state.positions.filter((e=>e.type===Z.d.Airport)).map(((e,a)=>({key:e.name,label:e.name,value:e.name,item:e})))},{label:"灾区",options:n.state.positions.filter((e=>e.type===Z.d.DisasterArea)).map(((e,a)=>({key:e.name,label:e.name,value:e.name,item:e})))},{label:"集结点",options:n.state.positions.filter((e=>e.type===Z.d.Source)).map(((e,a)=>({key:e.name,label:e.name,value:e.name,item:e})))},{label:"安置点",options:n.state.positions.filter((e=>e.type===Z.d.Destination)).map(((e,a)=>({key:e.name,label:e.name,value:e.name,item:e})))},{label:"医院",options:n.state.positions.filter((e=>e.type===Z.d.Hospital)).map(((e,a)=>({key:e.name,label:e.name,value:e.name,item:e})))}]),p=(0,i.iH)([{label:"直升机",options:n.state.aircrafts.filter((e=>e.type===Z.$.Helicopter)).map(((e,a)=>({key:e.name,label:e.name,value:e.name,item:e})))},{label:"固定翼飞机",options:n.state.aircrafts.filter((e=>e.type===Z.$.FixedWing)).map(((e,a)=>({key:e.name,label:e.name,value:e.name,item:e})))}]),v=(e,a,t)=>{k.Z[e]({message:a,description:t,placement:"top"})},c=()=>{void 0!==o.value?void 0!==d.value?s.value&&void 0===r.value?v("error","错误","未选择飞机类型"):a("start",n.getters.positionByName(o.value),n.getters.positionByName(d.value),s.value?n.getters.aircraftByName(r.value):null):v("error","错误","未选择目的地"):v("error","错误","未选择出发地点")};return(e,a)=>((0,l.wg)(),(0,l.j4)((0,i.SU)(u.ZP),{title:t.title},{default:(0,l.w5)((()=>[(0,l._)("div",H,[W,(0,l.Wm)((0,i.SU)(w.ZP),{value:o.value,"onUpdate:value":a[0]||(a[0]=e=>o.value=e),style:{width:"200px"},options:m.value,placeholder:"选择出发地点"},null,8,["value","options"])]),(0,l._)("div",P,[D,(0,l.Wm)((0,i.SU)(w.ZP),{value:d.value,"onUpdate:value":a[1]||(a[1]=e=>d.value=e),style:{width:"200px"},options:m.value,placeholder:"选则目的地"},null,8,["value","options"])]),(0,l._)("div",C,[F,(0,l.Wm)((0,i.SU)(M.ZP),{checked:s.value,"onUpdate:checked":a[2]||(a[2]=e=>s.value=e)},null,8,["checked"])]),s.value?((0,l.wg)(),(0,l.iD)("div",N,[z,(0,l.Wm)((0,i.SU)(w.ZP),{value:r.value,"onUpdate:value":a[3]||(a[3]=e=>r.value=e),style:{width:"200px"},options:p.value,placeholder:"选择飞机型号"},null,8,["value","options"])])):(0,l.kq)("",!0),(0,l._)("div",I,[(0,l.Wm)((0,i.SU)(x.Z),{type:"primary",onClick:a[4]||(a[4]=e=>c())},{default:(0,l.w5)((()=>[(0,l.Uk)("开始计算")])),_:1})])])),_:1},8,["title"]))}});const q=(0,h.Z)(j,[["__scopeId","data-v-4979e723"]]);var B=q,A=(0,l.aZ)({__name:"MainPage",setup(e){const a=(0,i.iH)(!1),t=(0,i.iH)(0),o=(0,i.iH)(0),u=(0,i.iH)(0),d=(0,i.iH)(0),r=(e,a,t,l)=>{const i=Math.PI/180;let n=6378137,s=6356752.314245,o=1/298.257223563,u=e*i-t*i,d=Math.atan((1-o)*Math.tan(a*i)),r=Math.atan((1-o)*Math.tan(l*i)),m=Math.sin(d),p=Math.cos(d),v=Math.sin(r),c=Math.cos(r),_=u,b=Math.PI,f=0,h=0,y=0,g=0,k=0,w=40;while(Math.abs(_-b)>1e-12&&w-- >0){let e=Math.sin(_),a=Math.cos(_);if(h=Math.sqrt(c*e*(c*e)+(p*v-m*c*a)*(p*v-m*c*a)),0==h)return 0;g=m*v+p*c*a,k=Math.atan2(h,g);let t=Math.asin(p*c*e/h);f=Math.cos(t)*Math.cos(t),y=g-2*m*v/f;let l=o/16*f*(4+o*(4-3*f));b=_,_=u+(1-l)*o*Math.sin(t)*(k+l*h*(y+l*g*(2*y*y-1)))}if(0==w)return 0;let M=f*(n*n-s*s)/(s*s),x=1+M/16384*(4096+M*(M*(320-175*M)-768)),U=M/1024*(256+M*(M*(74-47*M)-128)),Z=U*h*(y+U/4*(g*(2*y*y-1)-U/6*y*(4*h*h-3)*(4*y*y-3)));return s*x*(k-Z)/1e3},m=(e,a,t)=>{console.log(e,a,t),null==t?p(e,a):v(e,a,t)},p=(e,l)=>{a.value=!1,t.value=r(e.longitude,e.latitude,l.longitude,l.latitude)},v=(e,l,i)=>{a.value=!0,t.value=t.value=r(e.longitude,e.latitude,l.longitude,l.latitude),d.value=t.value/i.cruising_speed,o.value=d.value*i.fuel_consumption_per_unit_time,u.value=o.value/i.max_fuel};return(e,r)=>((0,l.wg)(),(0,l.j4)((0,i.SU)(n.Z),{justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,i.SU)(s.Z),{span:"8"},{default:(0,l.w5)((()=>[(0,l.Wm)(B,{onStart:m})])),_:1}),(0,l.Wm)((0,i.SU)(s.Z),{span:"7"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{more_detail:a.value,distance:t.value,need_fuel:o.value,need_time:d.value,percentage:u.value},null,8,["more_detail","distance","need_fuel","need_time","percentage"])])),_:1})])),_:1}))}});const $=A;var R=$}}]);
//# sourceMappingURL=45.bdca5e49.js.map